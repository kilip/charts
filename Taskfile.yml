version: "3"

tasks:
  port-forward:
    desc: Forward a service port
    cmds:
      - export POD_NAME=$(kubectl get pods -l "app.kubernetes.io/name=openhab,app.kubernetes.io/instance=openhab" -o jsonpath="{.items[0].metadata.name}")
      - kubectl port-forward
          $(kubectl get pods -l
            "app.kubernetes.io/name=openhab,app.kubernetes.io/instance=openhab"
            -o jsonpath="{.items[0].metadata.name}"
          )
        8080:8080
      #- kubectl port-forward $POD_NAME 8080:8080
  pull-secret:
    desc: Add image pull secret
    cmds:
      - kubectl create secret generic github-pull-secret
          --from-file=.dockerconfigjson=/home/toni/.docker/config.json
          --type=kubernetes.io/dockerconfigjson
